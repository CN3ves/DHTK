###########
Get started
###########

Installation
------------

In order to install DHTK, `Python 3.x <https://www.python.org/downloads/>`_ is required.
Note that when using a local triplestore, `Docker <https://docs.docker.com/get-docker/>`_ application is required as DHTK uses a Fuseki container as endpoint.

There are two main ways to get DHTK python module:

1) Download the `DHTK source code <https://gitlab.com/dhtk/dhtk/tree/master>`_ in your preferred format, extract the DHTK files and access them via console.

::

    $ cd dhtk
    $ python setup.py


2) or use pip:

::

    $ pip install git+https://gitlab.com/dhtk/dhtk.git



How to use
----------
DHTK is a module for Python3.x. As such, it is accessible using any Python console or environment.
DHTK access occurs in four steps:

1) Importing DHTK module

.. literalinclude:: ./examples/usage.py
    :language: python
    :lines: 3-11
    :emphasize-lines: 1

2) Define DHTK settings

.. literalinclude:: ./examples/usage.py
    :language: python
    :lines: 12-21
    :emphasize-lines: 1

3) Connect to a `SPARQL <https://en.wikipedia.org/wiki/SPARQL>`_ endpoint
4) Load and use a custom DHTK extension

.. literalinclude:: ./examples/usage.py
    :language: python
    :lines: 22-28
    :emphasize-lines: 1



Changelog
---------

Latest changes :

- Added the "Clean Text" module that gets rid of header, footer and footnotes
- Added "Tests" files that will help us provide you with a stable working toolkit, as well as help in adding new features and implementing contributions by our community 7


Troubleshooting
---------------

The Troubleshooting section will become available at a later date. Please, make sure to read the "Installation" section of this page as well as the "Guides" section before using DHTK.

DHTK 101
========


Features
--------

- Easy to use
- Access to a wide range of literary works
- The ability to analyze resources in an extended way
- Efficient and time effective



What is DHTK?
-------------

In recent years, Digital Humanities (DH) have received a particular attention in both the humanities and computer science communities. Although automatic tools for text or image analysis have already been created for some time, many of these tools have technical difficulties or scientific objectives that do not properly fit the needs of the humanities community. In fact, one of the major limitations in the study of literary works is not only the access to a wider range of works but also the ability to analyze such resources in an extensive way given the intrinsic cognitive limits of the human being. By introducing the Digital Humanities ToolKit, we present a new python library whose scope is to overcome these limits by providing a fast and intuitive tool for a large-scale study of large literary databases by leveraging on some well-known semantic knowledge resources.


Architecture
------------

The DHTK toolkit is composed of three independent modules, organized according to the logic task they perform. The logic modules are: common modules, text resources, metadata search and NLP Processing.


Common Modules
--------------

The common modules' main purpose is to ensure a continuity and a structural consistency between the various textual resource modules that will be added over time. They are composed of classes that define the general concepts of Author, Book, Corpus, TextRepository, and RDFPro [2] wrappers used to handle RDF files.


Text Resources
--------------

This module is designed to contain the textual resources available on the LOD. We initially focused on Project Gutenberg because of its relevance in the humanist community and we found a lack of automatic tools available in order to exploit   this specific resource. The main purpose of this module is to facilitate access to texts.


Metadata search
---------------

One of the most important aspects for a humanist is not just the availability of texts but also the metadata coming with texts. Unfortunately, not all repositories have complete information such as the date of the first publication or the first publisher. For example, Project Gutenberg does not store the original publishing date of its books, which can represent a problem if a corpus needs be delimited to a decade of published literature. DBpedia, thanks to its encyclopaedic nature, helps to rethink these elements. To this end, we have created the metadata search module on DBPedia that allows to complete and expand the missing information.


NLP Processing
--------------

This module aims to integrate existing NLP tools into other libraries. For the time being, DHTK integrates entirely the NLTK library to which this work is inspired.

Guides
======


1. Searching the Gutenberg databases: the “GutenbergSearchTripletStore()” class
-------------------------------------------------------------------------------

The main class of DHTK is the “GutenbergSearchTripletStore” (GS). GS is a class that allows instancing a search session in the Gutenberg database. The class is initialized as follows:

::

    >>> from dhtk.catalogs.gutenberg.search_triplet_store import GutenbergSearchTripletStore
    >>> gutenberg_search = GutenbergSearchTripletStore()

Once the class is instanced, several methods are accessible. Those can be separated into three groups:


1.1 Search
----------

The “Search” methods do just that - search. In the following example we use a “search_by_author()” method:
::

    >>> search_result = guteberg_search.search_by_author(“Charles Darwin”)

It is not the only method available as there are multiple other ways of searching the database, such as:

- search_by_title()
- search_by_bookshelves()
- search_by_subject()

You can see an example of how to use the search_by_title() method below:
::

    >>> Search_result = gutenberg_search.search_by_title(“On The Origin of Species”)

Other methods work in a similar way.


1.2 All
-------

The “All” methods allow to retrieve a list of all the authors, books, subjects or themes. The method all_books(), for instance, provides a list of all the books found in the database:

::

    >>> all_books_list = gutenberg_search.all_books()

NOTE:

The Search and All methods thus allow to:

1. Consult the Gutenberg database to gain a general understanding of what it contains. The search results will include note in a form of a dictionary. 2. Obtain the unique identifiers that match to the search terms

- Thus, DHTK enables a transition between the semantics of humanities and those of computer sciences.

Below is an example of a result. Notice the presence of the “author_id” and “book_id” keys. Those keys are what will allow you to fetch book in the Gutenberg archive.

::

    >>> from dhtk.catalogs.gutenberg.search_triplet_store import GutenbergSearchTripletStore
    >>> from pprint import pprint
    >>> gutenberg_seearch = GutenbergSearchTripletStore()
    >>> result = gutenberg_seearch.search_by_title("The Origin of Species")
    >>> pprint(result[0])
    {
        'author': 'Darwin, Charles',
        'author_id': 'http://www.gutenberg.org/2009/agents/485',
        'book_id': 'http://www.gutenberg.org/ebooks/8205',
        'language': 'en',
        'title': 'On the Origin of Species'
    }


1.3 Book:
---------

The “Book” methods allow retrieving specific items from the Gutenberg database – namely, books – thanks to the identifiers (book_id/author_id) obtained via “search” methods (see section 1.1). Here is an example of how to retrieve a book by using its identifier:

::

    >>> result = gutenberg_search.search_by_title("The Origin of Species")
    >>> book_id = result[0]['book_id'] #get any result book id
    >>> book = gutenberg_search.book_from_book_id(book_id)
    >>> pprint(book.print_book_information())

    Title : On the Origin of Species

    Author : Charles Darwin

    Metadata :

    - gutenberg_id: http://www.gutenberg.org/ebooks/8205

    None


NOTE:

a Book() object which allows working with another type of the Book() class.


2. Retrieving books: the “Book()” class
---------------------------------------

In DHTK, specific searches result in the Book() objects. Those are digital representations of book contained in the Gutenberg database. The Book() class can be used with following methods:


2.1 Get_author()
----------------

The get_author() method allows generating an “author” object which contains information on the author of a given item:

::

    >>> book.get_author().print_info()


2.2 Get_repository()
--------------------

The get_repository() method is what retrieves the original text. The method’s output is an object called GutenbergBook() which is the object that is needed to access a series of methods that allow manipulating the text of the book in question. The text_original() method, for example, allows to display the original text of the book:

::

    >>> text = book.get_repository()
    >>> print(text.get_original_text(book))

::

    The Project Gutenberg EBook of On the Origin of Species, by Charles Darwin



    This eBook is for the use of anyone anywhere at no cost and with

    almost no restrictions whatsoever. You may copy it, give it away or

    re-use it under the terms of the Project Gutenberg License included

    with this eBook or online at www.gutenberg.org



    Title: On the Origin of Species

    1st Edition

    Author: Charles Darwin

    Release Date: Release Date: March, 1998 [EBook #1228]

    Posting Date: November 23, 2009

    Language: English

    Character set encoding: ASCII



    *** START OF THIS PROJECT GUTENBERG EBOOK ON THE ORIGIN OF SPECIES ***

    (…)

Other methods that are accessible via the get_repository() method are:

- text_original()
- clean_text()
- save_text()

GutenberSearchTripletStore(), Book() and Author() include a lot of other methods. In order to use them or to obtain technical details on those classes and their associated methods, please refer to documentation.


3. Creating a corpus: the Corpus() class
----------------------------------------

DHTK offers a class called Corpus(). This class allows creating a digital representation of a collection of books from Gutenberg, which become Book() objects.

The Corpus() class takes multiple parameters: a title, an access path, a list of books. You can initialize a Corpus() object as follows:

::

    >>> from dhtk.common.corpus import Corpus
    >>> # first, create a book list
    >>> books = [gutenberg_search.book_from_book_id(book['book_id']) for book in result]
    >>> my_corpus = Corpus(
        name='Corpus des oeuvres de et sur Darwin',
        description='Contient les oeuvres complètes de/sur Darwin’,
        corpora_path=os.path.expanduser("~/Desktop/"),
        book_list=books
    )
    >>> print(my_corpus)
    0 Charles Darwin, On the Origin of Species
    1 Charles Darwin, On the Origin of Species By Means of Natural Selection Or, the (…)
    2 Charles Darwin, On the Origin of Species by Means of Natural Selection
    3 Charles Darwin, On the Origin of Species by Means of Natural Selection or the (…)
    4 Charles Darwin, The Foundations of the Origin of Species Two Essays written (…)
    5 Charles Darwin, The Origin of Species by Means of Natural Selection Or, the (…)
    (…)


Naturally, it is possible to initialize a Coprus() object without adding books. Your corpus will then be empty.

The corpus class then provides an object and so, a series of methods:


3.1. Add/Remove/Clear Methods
---------------------------^^

The Add, Remove and Clear methods are simple tools that allow to add one or several books to a corpus, remove them from said corpus or to clear that corpus altogether. Here is a non-exhaustive list of methods:

• add_book()

• add_books()

• remove_book()

• clear()

Below is an example of how to add a book to your corpus with help of the add_book() method:

::

    >>> result2 = gutenberg_search.search_by_title("Charles Lyell")
    >>> book_id = result2[0]['book_id']
    >>> my_book = gutenberg_search.book_from_book_id(book_id)
    >>> my_corpus.add_book(my_book)
    >>> print(my_corpus)
    0 Charles Darwin, On the Origin of Species
    1 Charles Darwin, On the Origin of Species By Means of Natural Selection Or, the (…)
    2 Charles Darwin, On the Origin of Species by Means of Natural Selection
    3 Charles Darwin, On the Origin of Species by Means of Natural Selection or the (…)
    4 Charles Darwin, The Foundations of the Origin of Species Two Essays written (…)
    5 Charles Darwin, The Origin of Species by Means of Natural Selection Or, the (…)
    (…)

    9 Thomas George Bonney, Charles Lyell and Modern Geology

The new book is added at the end of the list.


3.2. Methods Get/Print
---------------------^

The Get and Print methods help with:

- retrieving a given book’s title

- retrieving a list of books that are in the corpus

- retrieving the name, access path or the description of the corpus

As such, the method get_book_list() for instance allows retrieving all of the books that are present in the corpus:

::

    >>> books = my_corpus.get_book_list()
    >>> print(books)
    [<dhtk.catalogs.gutenberg.book.GutenbergBook object at 0x102978e10>,
    >>> <dhtk.catalogs.gutenberg.book.GutenbergBook object at 0x102985b70>,
    (…)
    >>> <dhtk.catalogs.gutenberg.book.GutenbergBook object at 0x102978860>]

    The method’s output in this case is a series of objects. Those are your books.


3.3. The Download methods
------------------------^

These methods allows downloading a book or the whole of your corpus. The methods create a directory with the name of your corpus in the directory that you chose when initializing the class (path) and retrieve the “.txt” files.
Here are said methods:

- download_book()
- download_book_corpus()

Here is an example of how to download a book with the download_book() method:

::

    >>> book_list = my_corpus.get_book_list()
    >>> my_corpus.download_book(book_list[0])

The Corpus() class offers additional methods. In order to find out more, please refer to our documentation.


4. Retrieving/adding metadata: the DbpediaMetadata() class
----------------------------------------------------------

Another important class of DHTK is the DbpediaMetadata() class. Dbpedia is an API of Wikipedia. This API allows retrieving secondary information (metadata) from Wikipedia notes. The Dbpedia() class is initialized as follows:

::

    >>> from dhtk.metadata.dbpedia import DbpediaMetadata
    >>> dbpedia_metadata = DbpediaMetadata()

The DbpediaMetadata() objects give you access to several methods, including, but not limited to:

- get_book_metadata()

- get_author_metadata()

The get_book_metadata() method is used as follows:

::

    >>> from dhtk.metadata.dbpedia import DbpediaMetadata
    >>> dbpedia_metadata = DbpediaMetadata()
    >>> book_metadata = dbpedia_metadata.get_book_metadata(book)
    >>> book.update_metadata(book_metadata)
    >>> book.print_info()

Note that metadata can be saved and used to update the “metadata” field of your Book() objects. The DbpediaMetadata() contains other methods as well. To get more information on those, please see the documentation.

Usage Examples
==============

Searching in Gutenberg
----------------------

.. literalinclude:: ./examples/find_book_and_print_info.py
    :lines: 6-


Get a corpus
------------


.. literalinclude:: ./examples/get_play_corpus.py
    :lines: 6-

.. literalinclude:: ./examples/seek_and_get.py
    :lines: 6-


Search metadata
---------------
.. literalinclude:: ./examples/metadata.py
    :lines: 6-

